<div>

    <script type = "text/ng-template" id="user-mgr-save.html">
        <form name="form" role="form" novalidate
              class="ng-scope ng-invalid ng-invalid-required ng-dirty"
              ng-submit="ok()">

            <div class="modal-header">
                <button type="button" class="close"
                        ng-click="cancel()">&times;</button>
                <h4 class="modal-title" id="myUserLabel">Create or edit a User</h4>
            </div>

            <div class="modal-body">
                <div class="form-group">
                    <label>username:</label>
                    
                    <input type="text" class="form-control" name="username"
                           ng-model="user.username" ng-required="true"
                           ng-minlength=3 ng-maxlength=20/>
                    <span class="error" ng-show="form.username.$error.minlength">Must be at least 3 characters.</span>
                    <span class="error" ng-show="form.username.$error.maxlength">Must be at most 20 characters.</span>
                </div>
                
                <div class="form-group">
                    <label>password:</label>
                    
                    <input type="text" class="form-control" name="password"
                           ng-model="user.password" ng-required="true"
                           ng-minlength=3 ng-maxlength=20/>
                    <span class="error" ng-show="form.password.$error.minlength">Must be at least 3 characters.</span>
                    <span class="error" ng-show="form.password.$error.maxlength">Must be at most 20 characters.</span>
                </div>
                
                <div class="form-group">
                    <label>contact_email:</label>
                    
                    <input type="text" class="form-control" name="contact_email"
                           ng-model="user.contact_email" ng-required="true"
                           ng-minlength=3 ng-maxlength=20/>
                    <span class="error" ng-show="form.contact_email.$error.minlength">Must be at least 3 characters.</span>
                    <span class="error" ng-show="form.contact_email.$error.maxlength">Must be at most 20 characters.</span>
                </div>
                
                <div class="form-group">
                    <label>type:</label>
                    
                    <label class="radio"><input type="radio" name="type" value=" User"
                           ng-model="user.role" ng-required="true" ng-disabled="usroptdisabled"/>  User </label>
                    <label class="radio"><input type="radio" name="type" value=" Manager"
                           ng-model="user.role" ng-required="true" ng-disabled="mgroptdisabled"/>  Manager </label>
                </div>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" ng-click="cancel()">Cancel
                </button>
                <button type="submit" ng-disabled="form.$invalid" class="btn btn-primary">Save</button>
            </div>
        </form>
    </script>

    <div class="row" style="padding-bottom:10px" ng-show="binessSelect">
        <div class="col-md-3 col-lg-3 col-sm-3">
            <div class="dropdown">
                <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">{{activebusiness.name}}
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu">
                    <li ng-repeat="business in businesses">
                        <a href="" ng-click="changeusers(business)">{{business.name}}</a>
                    </li>
                    <li><a href="" ng-click="changeusers('none')">None</a></li>
                </ul>
            </div>
        </div>
    </div>
    <div class="panel panel-default" ng-hide="binessuser">
        <div class="panel-heading">
            <div style="display:inline; margin-right:75px" ng-show="limitReached">
                <h4 style="display:inline"><a href="" ng-click="create()"> Create a new user</a></h4>
                
            </div>
            <h4 style="display:inline; margin-right:75px">Allowed Manager Accounts: {{activebusiness.allowedMgrUsers}}</h4>
            <h4 style="display:inline">Allowed User Accounts: {{activebusiness.allowedUsrUsers}}</h4>
        </div>
        <div class="panel-body">
            
            <div class="row">
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Username</th>
                
                                <th>E-mail</th>

                                <th>Role</th>

                                <th></th>

                                <th></th>
                
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="user in users">
                
                                <td>{{user.username }}</td>
                
                                <td>{{user.contact_email }}</td>

                                <td>{{user.role}}</td>
                
                                <td>
                                    <button type="submit"
                                        ng-click="update(user.id)"
                                        class="btn">
                                        <span class="glyphicon glyphicon-pencil"></span>
                                            Edit
                                    </button>
                                </td>
                                <td>
                                    <button type="submit"
                                        ng-click="delete(user.id)"
                                        class="btn btn-danger">
                                        <span class="glyphicon glyphicon-remove-circle"></span>     Delete
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>